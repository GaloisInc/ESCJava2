(* Empty Ambient *)
new n. n[]

(* Single moves *)
new z. z[new w. w[do out z]]
new w z. z[] | w[do in z]

(* Double moves *)
new z.  z[new w. w[do out z. do in z]]
new w z. z[] | w[do in z. do out z]

(* Hanging moves *)
new n m. n[do in m | m[do out n] ]
new n m p. n[do in m] | m[p[do in n]]

(* Same name, different ambients *)
new n. n[new n. n[new m. m[do out n. do out n]]]
(* Same name, same ambients *)
new n. n[n[new m. m[do out n. do out n]]]

(* Implode *)
new n. n["Death!".#]

(* Entering "itself" *)
new n. n[do in n]
new n a. n[do in n | a[]] | n[]

(* Exiting "itself" *)
new n. n[do out n]
new n. n[n[do out n]]

(* Interleaving *)
new n m.
  n["1"."2"."3"."4"."5"."6"."7"."8"."9"] | 
  m["a"."b"."c"."d"."e"."f"."g"."h"."i"]

(* Down-down agent race *)
new n p q. n[ do in p | do in q ] | p[] | q[]

(* Up-down agent race *)
new n m p. n[ m[ do in p | do out n ] | p[]]

(* Up-up agent race *)
new n m. n[ m[ do out n."a" | do out n."b" ]]

(* Dn-dn ambient race *)
new n m. n[do in m] | m[do in n]

(* Up-dn ambient race *)
new n m p. n[ m[do in p] | p[do out n] ]

(* Up-up ambient race *)
new n m p. n[ m[do out n] | p[do out n] ]

(* Something complicated *)
new n m p. n[ do in m | do in p | m[do out n] | p["a"."b".do out n] ]
new n m. n[ n[ m[ do out n."a" | do out n."b" ]]]
new n p m. p[ n[ m[ do out n | do out p ]]]

(* Intersecting down-up-down-up *)
new n m. n[do in m. do out m] | m[go in n. do out n]
new n m. n[do in m. do out m.#] | m[do in n. do out n.#]

new n m p. n[ m[ do in p. do out p | do out n. do in n ] | p[]]

(* Two ambients named n *)
new n m p q. m[do in n] | n[do in p] | n[do in q]

(* do down here or do down there *)
new m p q. m[do in p. do out p | do in q. do out q] | p[] | q[]

new n m.
  n["in m". do in m. "out m". do out m] | 
  m["in n". do in n. "out n". do out n]

------------------------------------------------------

(* Open *)

new w.  do open w | w[]

new w a.  do open w | w[a[]]

new w a b.  do open w | w[a[]|b[]]

new w a b c d.  do open w.a[] | b[] | w[c[]|d[]]

new n m p. do open n | n[m[do in p]] | p[]

new n m p. n[do in m] | m[do open n]

new n m p. n[do in m] | m[do open n] | do open m

-------------------------------------------------------

(* I/O *)

new n. n[say n | ask x.x[]]

new n m p. n[ask x | wait 2.0. do open m | m[say p]]
new n m p. n[ask x | do open m | m[wait 2.0. say p]]

new n m. ask x. n[do in m & x] | say stay | m[]

--------------------------------------------------------------

